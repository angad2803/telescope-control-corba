# CORBA Alarm System

A complete distributed alarm system built with CORBA (Common Object Request Broker Architecture) middleware, featuring ALMA-compliant interface definitions and REST API integration.

## ğŸ—ï¸ Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CORBA ALARM SYSTEM FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP REST     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Java Process    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   POSTMAN   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  EXPRESS.JS     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ CORBA CLIENTâ”‚
â”‚   Client    â”‚                  â”‚  REST BRIDGE    â”‚                    â”‚  (Java)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  (Node.js)      â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚  Port: 3000     â”‚                           â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
                                                                               â”‚
                                                                      CORBA Protocol
                                                                     (Object Request)
                                                                               â”‚
                                                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CORBA SERVER LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    IOR Ref     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Method Call   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    ORB      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   AlarmImpl     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚Business â”‚ â”‚
â”‚  â”‚ (Object     â”‚                â”‚ (CORBA Servant) â”‚                  â”‚ Logic   â”‚ â”‚
â”‚  â”‚ Request     â”‚                â”‚                 â”‚                  â”‚         â”‚ â”‚
â”‚  â”‚ Broker)     â”‚                â”‚ - getAlarmById()â”‚                  â”‚         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ - getAction()   â”‚                  â”‚         â”‚ â”‚
â”‚                                 â”‚ - getPriority() â”‚                  â”‚         â”‚ â”‚
â”‚                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Project Structure

```
alarmsystem-project/
â”œâ”€â”€ idl/alarmsystem/
â”‚   â””â”€â”€ Alarm.idl                    # IDL Interface Definition (ALMA-compliant)
â”‚
â”œâ”€â”€ corba-server/
â”‚   â”œâ”€â”€ pom.xml                      # Maven build configuration
â”‚   â””â”€â”€ src/main/java/alarmsystem/
â”‚       â”œâ”€â”€ AlarmImpl.java           # CORBA Servant Implementation
â”‚       â”œâ”€â”€ Server.java              # CORBA Server Launcher
â”‚       â”œâ”€â”€ CorbaClient.java         # CORBA Client Test Tool
â”‚       â”œâ”€â”€ AlarmHelper.java         # Generated by idlj compiler
â”‚       â”œâ”€â”€ AlarmPOA.java            # Generated by idlj compiler
â”‚       â””â”€â”€ Alarm.java               # Generated by idlj compiler
â”‚
â””â”€â”€ express-bridge/
    â”œâ”€â”€ package.json                 # Node.js dependencies
    â””â”€â”€ server.js                    # REST API Bridge
```

## ğŸš€ Quick Start

### Prerequisites

- **Java 8 JDK** (for CORBA support with idlj compiler)
- **Maven 3.x** (for Java build management)
- **Node.js 16+** (for Express.js REST bridge)

### 1. Compile IDL to Java Stubs

```powershell
cd corba-server
idlj -fall -td src/main/java ../idl/alarmsystem/Alarm.idl
```

### 2. Build CORBA Server

```powershell
mvn clean compile
```

### 3. Start CORBA Server

```powershell
java -cp "target/classes" alarmsystem.Server
```

**Expected Output:**

```
Starting CORBA Alarm Server...
Alarm CORBA server is running...
IOR written to Alarm.ref
Server ready to accept requests
Press Ctrl+C to stop the server
Server entering main loop...
```

### 4. Start Express.js REST Bridge

```powershell
cd ../express-bridge
npm install
npm start
```

**Expected Output:**

```
Express Alarm Bridge running on port 3000
Alarm endpoint: http://localhost:3000/alarm
```

## ğŸ¯ API Endpoints

### Health Check

- **URL**: `http://localhost:3000/health`
- **Method**: `GET`
- **Response**:

```json
{
  "status": "OK",
  "service": "Alarm Express Bridge"
}
```

### Get Alarm Data (Default)

- **URL**: `http://localhost:3000/alarm`
- **Method**: `GET`
- **Response**:

```json
{
  "id": "ALM001",
  "description": "CORBA-ALARM-ALM001",
  "action": "Check system status",
  "priority": 5,
  "status": "ACTIVE",
  "timestamp": "2025-09-18T06:09:29.319Z",
  "source": "CORBA-Server"
}
```

### Get Alarm by Specific ID

- **URL**: `http://localhost:3000/alarm/{id}`
- **Method**: `GET`
- **Example**: `http://localhost:3000/alarm/ALM002`
- **Response**:

```json
{
  "id": "ALM002",
  "description": "CORBA-ALARM-ALM002",
  "source": "CORBA-Server",
  "method": "getAlarmById",
  "timestamp": "2025-09-18T06:09:29.319Z"
}
```

### Get Alarm Action

- **URL**: `http://localhost:3000/alarm/action`
- **Method**: `GET`
- **Response**:

```json
{
  "action": "Execute emergency procedure",
  "source": "CORBA-Server",
  "method": "getAction",
  "timestamp": "2025-09-18T06:09:29.319Z"
}
```

### Get Alarm Priority

- **URL**: `http://localhost:3000/alarm/priority`
- **Method**: `GET`
- **Response**:

```json
{
  "priority": 5,
  "source": "CORBA-Server",
  "method": "getPriority",
  "timestamp": "2025-09-18T06:09:29.319Z"
}
```

## ğŸ§ª Testing

### Direct CORBA Client Testing

```powershell
cd corba-server

# Test getAlarmById method
java -cp "target/classes" alarmsystem.CorbaClient getAlarmById ALM001

# Test getAction method
java -cp "target/classes" alarmsystem.CorbaClient getAction

# Test getPriority method
java -cp "target/classes" alarmsystem.CorbaClient getPriority

# Test with different alarm IDs
java -cp "target/classes" alarmsystem.CorbaClient getAlarmById CRITICAL001
```

### Postman Testing

1. Import the provided endpoints
2. Test each endpoint individually
3. Verify CORBA responses in real-time
4. Monitor CORBA server console for incoming requests

## ğŸ”„ Request Flow Diagram

```
                              DETAILED REQUEST FLOW

1. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  GET /alarm/ALM001
   â”‚   POSTMAN   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                         â”‚
                                                                           â–¼
2. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  req.params.id = "ALM001"
   â”‚  EXPRESS.JS     â”‚  callCorbaMethod("getAlarmById", "ALM001")
   â”‚  server.js      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
                                                                          â–¼
3. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  spawn("java", ["-cp", "target/classes",
   â”‚  CHILD PROCESS  â”‚         "alarmsystem.CorbaClient",
   â”‚  (Node.js)      â”‚         "getAlarmById", "ALM001"])
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                          â–¼
4. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  ORB.init() â†’ string_to_object(IOR)
   â”‚ CORBA CLIENT    â”‚  â†’ AlarmHelper.narrow(obj)
   â”‚ CorbaClient.javaâ”‚  â†’ alarm.getAlarmById("ALM001")
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                          â–¼
5. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Reads Alarm.ref file (IOR reference)
   â”‚   CORBA ORB     â”‚  Locates AlarmImpl servant object
   â”‚   (Runtime)     â”‚  Marshalls method call
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                          â–¼
6. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  public String getAlarmById(String id) {
   â”‚   AlarmImpl     â”‚    return "CORBA-ALARM-" + id;
   â”‚   (Servant)     â”‚  }
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                          â”‚
                               RESPONSE FLOW                              â”‚
                                                                          â–¼
7. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Returns: "CORBA-ALARM-ALM001"
   â”‚   AlarmImpl     â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
8. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  System.out.println("CORBA-ALARM-ALM001");
   â”‚ CORBA CLIENT    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼ stdout
9. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  javaProcess.stdout.on('data', callback)
   â”‚  EXPRESS.JS     â”‚  output = "CORBA-ALARM-ALM001"
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
10.â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  res.json({
   â”‚  EXPRESS.JS     â”‚    "id": "ALM001",
   â”‚  Response       â”‚    "description": "CORBA-ALARM-ALM001",
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    "source": "CORBA-Server", ... })
           â”‚
           â–¼ HTTP Response
11.â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  {
   â”‚   POSTMAN       â”‚    "id": "ALM001",
   â”‚   Result        â”‚    "description": "CORBA-ALARM-ALM001",
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    "timestamp": "2025-09-18T06:09:29.319Z" }
```

## ğŸ”§ Key Components

### 1. IDL Interface (ALMA-Compliant)

```idl
module alarmsystem {
    interface Alarm {
        string getAlarmById(in string id);
        string getAction();
        long getPriority();
    };
};
```

### 2. CORBA Servant Implementation

- **AlarmImpl.java** - Extends AlarmPOA, implements business logic
- **Server.java** - Initializes ORB, activates POA, publishes IOR
- **CorbaClient.java** - Test client for direct CORBA method calls

### 3. Express.js REST Bridge

- **server.js** - Translates HTTP requests to CORBA calls via Java subprocess
- Spawns Java processes to call CORBA methods
- Formats CORBA responses as JSON for REST consumption

### 4. Build System

- **Maven** for Java compilation and dependency management
- **npm** for Node.js package management
- **idlj compiler** for IDL-to-Java stub generation

## ğŸ¯ ALMA Standards Compliance

This system implements **ALMA (Atacama Large Millimeter Array)** compatible interface definitions:

- âœ… **getAlarmById(in string id)** - Retrieve alarm by identifier
- âœ… **getAction()** - Get alarm action description
- âœ… **getPriority()** - Get alarm priority level
- âœ… **Enterprise-grade CORBA middleware** for distributed computing
- âœ… **Interoperable Object References (IOR)** for service discovery

## ğŸš¨ Troubleshooting

### CORBA Server Won't Start

- Ensure Java 8 JDK is installed and configured
- Check that port is not in use by another process
- Verify `target/classes` directory contains compiled Java files

### Express Bridge Connection Errors

- Confirm CORBA server is running and has created `Alarm.ref` file
- Check that Java classpath is correctly set in Express server
- Verify CORBA server working directory matches Express configuration

### IDL Compilation Issues

- Ensure `idlj` compiler is available (part of Java 8 JDK)
- Check IDL syntax matches CORBA specification
- Verify output directory structure is correct

## ğŸ“¦ Dependencies

### Java (corba-server)

- Java 8 JDK (includes CORBA and idlj compiler)
- Maven 3.x
- Generated CORBA stubs (AlarmHelper, AlarmPOA, etc.)

### Node.js (express-bridge)

- Express.js 4.18.2
- CORS middleware
- Child process spawning for Java integration

## ğŸ‰ Features

- âœ… **True Distributed Computing** - CORBA middleware for enterprise-grade RPC
- âœ… **ALMA Standards** - Compatible with astronomical observatory systems
- âœ… **REST API Integration** - Modern HTTP endpoints calling legacy CORBA services
- âœ… **Real-time Processing** - Live CORBA method invocation via REST
- âœ… **Multi-language Support** - Java CORBA server with Node.js REST bridge
- âœ… **Enterprise Architecture** - POA activation, IOR publishing, ORB lifecycle management

## ğŸ“ License

This project demonstrates CORBA distributed computing concepts and ALMA-compliant interface definitions for educational and enterprise integration purposes.

---

**Built with enterprise-grade CORBA middleware for true distributed alarm processing** ğŸš€
